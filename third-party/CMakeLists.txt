if(BUILD_FLTK_GUI)
	add_subdirectory(Fl_Native_File_Chooser-0.86)
	set(FNFC_LIBRARY ${FNFC_LIBRARY} PARENT_SCOPE)
	set(FNFC_INCLUDE_DIRS ${FNFC_INCLUDE_DIRS} PARENT_SCOPE)
endif()

if(BUILD_EMBEDDED_LUA)
	# Lua 5.1.5
	if(BUILD_SHARED_LUA)
		set(LUA_DEFINITIONS "-DLUA_BUILD_AS_DLL")
		set(LUA_DEFINITIONS ${LUA_DEFINITIONS} PARENT_SCOPE)
	endif()
	add_subdirectory(lua-5.1.5/src)
	set(LUA_INCLUDE_DIRS "${CMAKE_CURRENT_SOURCE_DIR}/lua-5.1.5/src")
	set(LUA_INCLUDE_DIRS ${LUA_INCLUDE_DIRS} PARENT_SCOPE)
	set(LUA_LIBRARIES lua)
	set(LUA_LIBRARIES ${LUA_LIBRARIES} PARENT_SCOPE)
	set(LUA51_FOUND YES)

	add_definitions(${LUA_DEFINITIONS})

	if(BUILD_LUA_AS_CPP)
		add_definitions(-DLUABIND_CPLUSPLUS_LUA)
	endif()
	
	add_subdirectory(luabind)
	set(LUABIND_INCLUDE_DIRS "${CMAKE_CURRENT_SOURCE_DIR}/luabind" ${LUA_INCLUDE_DIRS})
	set(LUABIND_INCLUDE_DIRS ${LUABIND_INCLUDE_DIRS} PARENT_SCOPE)

	set(OSGLUA_USE_CPPINTROSPECTION ${BUILD_WITH_CPPINTROSPECTION})
	add_subdirectory(osgLua)
	set(OSGLUA_INCLUDE_DIRS "${CMAKE_CURRENT_SOURCE_DIR}/osgLua/include" "${CMAKE_CURRENT_BINARY_DIR}/osgLua/include" ${LUA_INCLUDE_DIRS})
	set(OSGLUA_INCLUDE_DIRS ${OSGLUA_INCLUDE_DIRS} PARENT_SCOPE)
endif()

# Lua stdlib release 15
add_subdirectory(stdlib/modules)

add_subdirectory(lua_modules)
